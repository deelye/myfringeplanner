  <% if @hand %>
    <div class="plan planner-card card-hover-out <%= planner.planner_clash(@planners, planner) %>">
  <% else %>
    <div class="plan planner-card <%= planner.planner_clash(@planners, planner) %>">
    <div title="Add to Calendar" class="addeventatc planner-index-calendar">
        <span class="start">03/24/2020 08:00 AM</span>
        <span class="end">03/24/2020 10:00 AM</span>
        <span class="timezone">America/Los_Angeles</span>
        <span class="title">Summary of the event</span>
        <span class="description">Description of the event</span>
        <span class="location">Location of the event</span>
    </div>
  <% end %>
    <%= image_tag(planner.performance.show.original_image, :alt => "Flyer image for show", height: planner.duration.to_f/100*1470) %>
    <div class="planner-card-info card-border <%= planner.performance.show.colour_class %> ">
      <h6><%= truncate(planner.performance.show.title, length: 30) %></h6>
      <div>
        <p><%= planner.performance.show.genre %></p>
        <div class="d-flex">
          <% dates = ["Aug "] %>
      <% performances = planner.performance.show.performances %>
      <% performances.each_with_index do |performance, index| %>
        <% if index == 0 %>
          <% dates << performances.first.start.strftime("%e").to_i %>
        <% elsif performances[index - 1].start.strftime("%e").to_i + 1  == performance.start.strftime("%e").to_i %>
          <% if performance == performances[-1] %>
            <% dates << "-" %>
            <% dates << performance.start.strftime("%e").to_i %>
          <% end %>
        <% elsif performances[index - 1].start.strftime("%e").to_i == performance.start.strftime("%e").to_i%>
        <% elsif dates.last == performances[index - 1].start.strftime("%e").to_i %>
          <% dates << ", " %>
          <% dates << performance.start.strftime("%e").to_i %>
        <% else %>
          <% dates << "-" %>
          <% dates << performances[index - 1].start.strftime("%e").to_i %>
          <% dates << ", " %>
          <% dates << performance.start.strftime("%e").to_i %>
        <% end %>
      <% end %>

      <p><i class="fas fa-clock" aria-hidden="true"></i> <%= planner.performance.time %></p>
      <p><i class="fa fa-calendar card-dates" aria-hidden="true"></i> <%= truncate(dates.join, length: 35) %></p>
    </div>
        <div class="d-flex justify-content-between">
          <p><i class="fas fa-map-marker-alt"></i> <%= truncate(planner.performance.show.venue.name, length: 50) %></p>
          <p>Â£<%= planner.performance.price %></p>
        </div>
      </div>
    </div>

  </div>

